# 计算机网络

## 数据链路层


## 网际层
arp协议：
	ip地址到mac地址的映射

网际控制报文协议ICMP：
	应用：ping、tracert
	
	* 终点不可达、时间超时、参数问题、改变路由（重定向）
	* 回送请求和回答：
	* 时间戳请求和回答：

内部网关协议RIP：
	作用：更新路由表
		net1, 2, RX ： 表示到达net1的跳数是2，吓一跳路由是RX
	
	疑问：在下述网络拓扑中，如果R1、R2的网络拓扑已经构造好了，在R1中有“net1 1, 直接”，在R2中有“net1 2, R1”，当net1的链路出现故障，R1的路由表“net1 16, 无法交付”，
		 当R2中路由表同步给R1的时候，R1会把路由表更新为“net1 3, R2”，这会导致传播非常的慢，为什么在更新路由表的时候不判断一下，如果下一条路由是自己的时候，不做更新路由表？
		 net1 -- R1 -- net2 -- R2 -- net3 
		 
内部网关协议OSPF（开放最短路径优先open shortest path first）
	作用：更新路由表
	
外部网关协议BGP
	作用：更新路由表
	
	BGP发言人
	
IP多播

	* ip数据报中，原地址：多播的地址，目标地址：D类地址（IP地址分类中，D类地址属于多播地址）

	* mac地址中，第一个字节的最低位是I/G位，0代表单个地址，1代表组地址，用来进行多播
	
	协议支持：
		网际组管理协议IGMP：
			作用：维护转发路由成员的变化
		
		多播路由选择协议

虚拟专用VPN
	互联网中的所有路由器，对目的地址是专用地址的数据报一律不进行转发
	专用地址：
		10.0.0.0到10.255.255.255		（10.0.0.0/8）
		172.16.0.0到172.31.255.255		（172.16.0.0/12）
		192.168.0.0到192.168.255.255	（192.168.0.0/16）
		
网络地址转换NAT

	H1（专用网192.168.0.2）  <-->  R1（有一个外网ip） ---> 互联网 --- H2
	
	   专网ip端口		 转换后外网的ip端口
	192.168.0.2:8080   ->  169.1.2.3:3000
	192.168.0.3:8080   ->  169.1.2.3:3001
	192.168.0.3:8081   ->  169.1.2.3:3002
	
	多播路由器、nat路由器
	
## 运输层

tcp：
	自动重传请求ARQ

	
超时重传时间的选择：

	新的RTTs = (1 - α) * 旧的RTTs + α * 新的RTT样本
	新的RTTd = (1 - β) * 旧的RTTd + β * |RTTs - 新的RTT样本|
	RTO = RTTs + 4 * RTTd
	
	RTT：报文段的往返时间
	RTTs：加权平均往返时间
	RTTd：RTT的偏差的加权平均值
	RTO： 超时重传时间 
	α = 0.125、β = 0.25
	RTT样本的选择：根据karn算法，对于超时重传过的确认，丢弃其RTT值，并增大超时重传时间RTO为原来的2倍

TCP拥塞控制方法
	慢开始
	拥塞避免
	快重传
	快恢复

	主动队列管理AQM：
		路由器在转发数据报的时候，将来不及处理的转发的数据报放入路由器的缓存队列，当队列满了之后就丢弃后续发来的数据报，这叫做尾部丢弃策略；
		当发生尾部丢弃，就可能会同时影响到很多的tcp连接，结果使这些tcp连接同一时间进入到慢开始状态，这在tcp的术语中称为全局同步。
		为了避免全局同步的出现，给路由器设置两个参数，最小门限、最大门限，当每一个分组到达时，RED（随机早起检测算法）就按照规定计算当前的平均队列长度，
		当平均队列长度 < 最小门限时，则将新分组放入队列排队
		当平均队列长度 > 最大门限,则将新分组丢弃
		当 最小门限 < 平均队列长度 < 最大门限时，按照一定的概率p丢弃分组。
	

tcp连接建立解决的问题：
	1. 使每一方明确知道对方的存在
	2. 要允许双方协商一些参数（如：最大窗口值）
	3. 能够对运输实体资源（缓存大小、连接表中的项目）进行分配

	为什么使用3次握手：
		1. 如果不使用3次握手，要达到建立缓存、协商窗口值的目的，那么也至少需要一次报文。因为如果你没有报文，
		
		如果是0次握手，直接发送数据： 接收方收到数据之后，由于还没有缓冲区，数据不知道往哪里放，且接收方建立的缓冲区可能容纳不下发送过来的数据
		如果是1次握手，也是协商不好使用的窗口大小
		如果是2次握手，客户端发送出一次握手，由于网络延迟很大，客户端超时了，客户端丢弃了这个连接，但是在未来的某个时间这个数据包到达了服务端，服务端给你将缓冲这些建立好，但是
			但是这个连接明显已经是失效了的，导致资源浪费	
		


## 无线网络和移动网络


物理层
	CSMA/CA（载波监听/碰撞避免）

		SIFS（短帧间间隔）：ACK帧、CTS帧、
			
		DIFS（分布协调帧间间隔）：

MAC层：	
	虚拟载波监听：
		源站把它要占用信道的时间及时通知给其它所有站。可以解决【隐秘站的问题】
		请求发送RTS（reqeust to send）
		允许发送CTS（clear to send）


控制帧、数据帧、管理帧

控制帧：RTS、CTS、ACK
	

java怎么使用udp通讯

	
	
ntp：网络时间协议

	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	