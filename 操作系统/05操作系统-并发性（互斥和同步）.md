# 操作系统—并发性（互斥和同步）

> 

## 1.并发的原理

1. 并发发生的情况：
	* 资源共享：内存
	* 互斥访问：设备（打印机）
	
2. 进程的交互：
	* 进程之间不知道对方的存在
	* 进程间知道对方的存在（如：共享对象）
	* 进程直接知道对方的存在
	
## 2.互斥：硬件的支持

1. 中断禁用
```c
while(true){
	/* 禁用中断 */
	/* 临界区 */
	/* 启用中断 */
	/* 其余代码 */
}
```

缺点:

	* 不能用于多处理器体系结构
	* 处理器被限制得只能交替执行程序



2. 专用机器指令

   * compare & swap
   * exchange

```c
int bolt = 1;

void p(int i){
	while(true){
        while(compare_and_swap(bolt, 0, 1) == 1)
            /* 不做任何事情 */
        /* 临界区 */
        bolt = 0;
        /* 其余代码 */
    }
}
```

特点：

	* 适用于单处理器或共享内存的多处理器的任意数量的进程
	* 简单易于证明
	* 可用于支持多个临界区，每个临界区可以用它自己的变量定义

缺点：

* 使用了忙等待（自旋等待）：会继续消耗处理器时间
* 可能饥饿
* 可能死锁

